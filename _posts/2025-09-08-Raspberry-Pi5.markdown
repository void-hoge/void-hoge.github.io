# Raspberry Pi5を買った

ちょっとやりたいことがあったのでRaspberry Pi5を購入しました。
秋月電子で15,000円ぐらいでした。

- [秋月電子: Raspberry Pi 5用公式アクティブクーラー](https://akizukidenshi.com/catalog/g/g129326/)

2019年末に4を買ったとき、電源、ヒートシンク、HDMIケーブルとケースのキットで1万円程度だったので、おそらく本体価格は2倍程度になっていそうな気がします。
高校時代には3Bとかが出ていて、1万円もせずに一通り遊べる環境を作れていた気がしますが、今や高校生が気軽に遊べる値段ではないですね。

## OSを焼く
サンディスクの256GBのmicroSDカードを使用しました。2023年に買ったものらしい。
一応Class10と書いてあるので良さそうですが、microSDの良し悪しが何で決まるのか未だによくわからん。

- [Amazon: サンディスク microSD 256GB UHS-I Class10 Nintendo Switch メーカー動作確認済SanDisk Ultra SDSQUA4-256G-EPK エコパッケージ](https://www.amazon.co.jp/dp/B08K3ZWLLP?ref=ppx_yo2ov_dt_b_fed_asin_title&th=1)

rpi-imagerのdebファイルを母艦のDebianにインストールし、適当に書こうとしたところ失敗しました。
調べるとrpi-imagerのバグらしく、USB3.0のポートに指すとだめらしいです。

私の場合は母艦のUSBポートが3.0以上しかなかったのですが、SDカードアダプタのmicroSDポートに直挿しするのではなく、(フルサイズ)SDカードアダプタを介することにより、なぜか書けるようになりました。

ちなみに使用したのはRaspberry Pi OS 64bit Liteです。

## 電源
デスクのACアダプタのポートが足りなかったので、最初は母艦であるThinkPad X13 Gen3のUSB-Cから電源を取っていました。
しかし、Raspberry Pi5から公式電源アダプタが27Wになったというのを見て、流石にACアダプタから直接給電するようにしました。(27W食うわけはないと思うけど)

なお、別にラップトップから電源をとっても後述するベンチマークの結果は変わりませんでした。

## 冷却ファン
Raspberry Pi5から公式のアクティブクーラーが発売されました。
本体同様、秋月で購入しました。

- [秋月電子: Raspberry Pi 5用公式アクティブクーラー](https://akizukidenshi.com/catalog/g/g129327/)


| ![image](/assets/2025-09-08-raspibench/IMG_1043.JPG) |
|:----------------------:|
| ロゴがおしゃれ         |

ヒートシンクには放熱シールが貼り付けられており、プロセッサ、IOコントローラ、ワイヤレスモジュール、電源回路をカバーしています。(RAMはカバーしていません)

また、基盤の対角線上に二箇所、専用の固定ピンを指すための穴が開けられており、そこにプラスチック製のピンを指して固定する方法でした。
このピンは一度指すと抜くのは非常に大変で、取り外しのことは考えた設計ではないと思われます。
ピンセットで無理やりピンの左右を押さえつつ、芯を抜いたボールペンの先端で押し戻すことで一応取り外せました。

Raspberry Pi4までのファンはGPIOから電源を取るものだったため、常に回りっぱなしでした。
しかし今回、公式サポートに伴ってファンコンと専用電源ポートが追加されCPU温度による制御がかかるようになっています。

## 冷却能力の比較
今回、冷却ファンの能力を確かめる実験を行います。以下のリポジトリのプログラムは、指定したコマンドで負荷をかけながら、CPUクロック速度とCPU温度、ファンコンがアクティブかどうかを記録するものです。

- [GitHub: void-hoge/raspibench](https://github.com/void-hoge/raspibench.git)

負荷のプログラムには`stress-ng`を用い、4CPUで180秒実行します。
また、負荷の前に20秒、後に180秒温度とCPUクロックを記録します。

比較を行ったのは以下の3つの条件です。
- クーラーあり (w/ cooler)
- ファンなし(ヒートシンクあり) (w/o fan)
- クーラーなし (w/o cooler)

室温は25℃程度でした。

### 結果
実験結果を以下に示します。

![image](/assets/2025-09-08-raspibench/raspibench.png)

横軸が時間、左縦軸がクロック速度、右縦軸がCPU温度です。下の青は負荷をかけていた区間、赤はクーラーありにおいてファンが回っていた区間を表します。

クーラーなしは負荷をかけ始めてから80秒程度で80℃に到達し、断続的にサーマルスロットリングが発生しています。
Raspberry Pi5は80~85℃でクロックの制限を行うらしいので、これは公式が言うとおりの動作と言えます。

次にファンありとなしの比較ですが、今回の実験においては、ファンが回っていてもいなくてもサーマルスロットリングは発生しませんでした。
しかし、ファンが回っている場合、150秒ぐらいでほぼ温度が飽和しているのに対し、ファンが回っていない場合は負荷を切る直前まで温度が伸び続けていることがわかります。
また、負荷を切った後の冷却速度には顕著な差があります。

Raspberry Pi5のファンコンは、デフォルトで50℃で始動し45℃で停止するようです。
負荷を掛けている部分では、ファンが回り始めたところからファンなしとの傾きの差が出てきており、負荷を止めた後も最も素早く冷えていることがわかります。

## まとめ

というわけでRaspberry Pi5をセットアップして、公式クーラーの能力を確かめました。
かなりショボい風量しか出ないのですが、一応それでも効果があることがわかりました。
私の環境では常に60℃を下回っており結構頼りになりそうな雰囲気です。
開放環境で使うには十分な能力を持っていると言えるでしょう。
